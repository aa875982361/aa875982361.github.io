<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>叶落林间</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="个人学习笔记，仅供本人复习">
<meta property="og:type" content="website">
<meta property="og:title" content="叶落林间">
<meta property="og:url" content="http://nisonfuture.cn/page/2/index.html">
<meta property="og:site_name" content="叶落林间">
<meta property="og:description" content="个人学习笔记，仅供本人复习">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="叶落林间">
<meta name="twitter:description" content="个人学习笔记，仅供本人复习">
  
    <link rel="alternate" href="/atom.xml" title="叶落林间" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">叶落林间</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">你只有非常努力，才能看起来毫不费力</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://nisonfuture.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-管理员页面的初步构建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/08/管理员页面的初步构建/" class="article-date">
  <time datetime="2018-03-08T01:35:59.000Z" itemprop="datePublished">2018-03-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/08/管理员页面的初步构建/">管理员页面的初步构建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>通过全局搜索 找到左边表单的配置项，修改为我所需要的配置，则如下</p>
<p>D:\luwei\project\wallpaper\wallpaper\src\common\menu.js<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const menuData = [&#123;</span><br><span class="line">  name: '权限管理',</span><br><span class="line">  icon: 'book',</span><br><span class="line">  path: 'dashboard',</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: '刘海模版系列管理',</span><br><span class="line">  icon: 'book',</span><br><span class="line">  path: 'dashboard',</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: '刘海模板管理',</span><br><span class="line">  icon: 'book',</span><br><span class="line">  path: 'dashboard',</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: '系统壁纸系列管理',</span><br><span class="line">  icon: 'book',</span><br><span class="line">  path: 'dashboard',</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: '系统壁纸管理',</span><br><span class="line">  icon: 'book',</span><br><span class="line">  path: 'dashboard',</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  name: '留言管理',</span><br><span class="line">  icon: 'book',</span><br><span class="line">  path: 'dashboard',</span><br><span class="line">&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>不过样式有点不太对劲 如下：<br><img src="./images/1520480250618.jpg" alt="enter description here"></p>
<p>而目标原型为：<br><img src="./images/1520480283537.jpg" alt="目标原型"><br>需要修改一下 </p>
<p>突然间 发现 好像是因为我设置path 路径是一样的 所以才出现这个问题  修改后就解决了 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/08/管理员页面的初步构建/" data-id="cjemau3p3002mv0ugc0lczdyp" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ant-Design/">ant Design</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Flux应用架构" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/Flux应用架构/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/Flux应用架构/">Flux应用架构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><blockquote>
<p>为了方便理解，主要的英文名词都没有翻译。比如：dispatcher（调度者）、 store（仓库）、view（视图）</p>
</blockquote>
<p>Flux是Facebook用来构建用户端的web应用的应用程序体系架构。它通过利用数据的单向流动为React的可复用的视图组件提供了补充。相比于形式化的框架它更像是一个架构思想，不需要太多新的代码你就可以马上使用Flux构建你的应用。</p>
<p>Flux应用主要包括三部分：dispatcher、store和views（React components），千万不要和MVC(model-View-Controller)搞混。Controller在Flux应用中也确实存在，但是是以controller-view的形式。view通常处于应用的顶层，它从stores中获取数据，同时将这些数据传递给它的后代节点。另外，action creators - dispatcher辅助方法 - 一个被用来提供描述应用所有可能存在的改变的语义化的API。把它理解为Flux更新闭环的第四个组成部分可以帮助你更好的理解它。</p>
<p>Flux使用单向的数据流动来避开MVC. 当用户与React视图交互的时候，视图会通过中枢dispatcher产生一个action。然后大量的保存着应用数据和业务逻辑的视图接收到冒泡的action，更新所有受影响的view。这种方式很适合React这种声明式的编程方式，因为它的store更新，并不需要特别指定如何在view和state中过渡。</p>
<p>我们独创性的解决了数据的获取：举个栗子，比如我们需要展示一个会话列表，高亮其中未读的会话，同时展示未读会话的数量。如果用MVC架构的话将很难处理这种情况，因为更新一个对话为已读的时候会更新对话model，然后同样也需要更新未读对话数量model（数量-1）。这样的依赖和瀑布式的更新在大型的应用中非常常见，导致错综复杂的数据流动和不可预测的结果。（这其实是Facebook之前的一个线上bug，有时候用户看到提示说有一条未读信息，但是点进去却发现没有）。</p>
<p>反过来让 Store 来控制：store接受更新，并在合适的时机处理这些更新。而不是采用一贯依赖外部的方式来更新数据。在store外部，并没办法看到store内部是如何处理它内部的数据的，这样的方式保证了一个清晰的关注点分离。Store并没有类似setAsRead()这样直接的setter方法，但是在其自成一体的世界中拥有唯一个获取新数据的方法 - store通过dispatcher注册的回调函数。</p>
<h2 id="Structure-and-Data-Flow"><a href="#Structure-and-Data-Flow" class="headerlink" title="Structure and Data Flow"></a>Structure and Data Flow</h2><p>在Flux应用中数据是单向流动的：<br><img src="http://facebook.github.io/flux/img/flux-simple-f8-diagram-1300w.png" alt="enter description here"></p>
<p>单向的数据流是Flux应用的核心特性，上图应该成为Flux程序员的主要心智模型。Dispatcher，stores和views是拥有清晰的输入输出的独立节点。而actions是包含了新的数据和身份属性的简单对象。</p>
<p>用户的交互可能会使views产生新的action，这个action可以在整个系统中传播：<br><img src="http://facebook.github.io/flux/img/flux-simple-f8-diagram-with-client-action-1300w.png" alt="enter description here"><br>所有的数据的流动都通过中枢dispatcher。Action可以通过action creator产生并被提供给dispatcher，但多数情况下action是通过用户与views的交互产生。dispatcher接收到action并执行那些已经注册的回调，向所有stores分发action。通过注册的回调，store响应那些与他们所保存的状态有关的action。然后store会触发一个 change 事件，来提醒controller-views数据已经发生了改变。Controller-views监听这些事件并重新从store中获取数据。这些controller-views调用他们自己的setState()方法，重新渲染自身以及组件树上的所有后代组件。<br><img src="http://facebook.github.io/flux/img/flux-simple-f8-diagram-explained-1300w.png" alt="enter description here"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/Flux应用架构/" data-id="cjemau3n60000v0ug8ror7erx" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-登录页面的错误提示" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/登录页面的错误提示/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/登录页面的错误提示/">2018-3-7 登录页面的错误提示</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="./images/1520409819446.jpg" alt="输入错入的数据的时候 会有错误提示"></p>
<p>查看代码发现 是在下面的代码控制的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function checkStatus(response) &#123;</span><br><span class="line">  if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) &#123;</span><br><span class="line">    return response;</span><br><span class="line">  &#125;</span><br><span class="line">  const errortext = codeMessage[response.status] || response.statusText;</span><br><span class="line">  notification.error(&#123;</span><br><span class="line">    message: `请求错误 $&#123;response.status&#125;: $&#123;response.body.msg&#125;`,</span><br><span class="line">    description: errortext,</span><br><span class="line">  &#125;);</span><br><span class="line">  const error = new Error(errortext);</span><br><span class="line">  error.name = response.status;</span><br><span class="line">  error.response = response;</span><br><span class="line">  throw error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将errContext 和 response这两个属性 输出来 查看一下<br><code>console.log(&#39;checkStatus&#39;, JSON.stringify(errortext), JSON.stringify(response));</code><br>结果如下<br><code>checkStatus &quot;发出的请求有错误，服务器没有进行新建或修改数据的操作。&quot; {}</code></p>
<p><img src="./images/1520411194353.jpg" alt="response"><br>返回的数据解析如上图 但是没有返回结果的body 但是通过浏览器的拦截 我看到有response是有数据的<br><img src="./images/1520411270183.jpg" alt="浏览器拦截"><br>所以这就很奇怪 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/登录页面的错误提示/" data-id="cjemau3p3002pv0ugv4623937" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ant-Design/">ant Design</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-登录接口与后端的交互" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/登录接口与后端的交互/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/登录接口与后端的交互/">2018-3-7与后端的交互</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>公司项目点击后产生一个POST请求，发送的数据为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">account:&quot;luwei&quot;</span><br><span class="line">captcha:&quot;a&quot;</span><br><span class="line">password:&quot;luwei&quot;</span><br><span class="line">type:&quot;account&quot;</span><br><span class="line">uuid:&quot;e5d1e429-b084-43e0-887c-2c15f406972a_1520385455390&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有就是在头会设置一个token ：<br><code>Authorization:token 38dcbad3729b47968976f5b4793feae5jee9sz8o</code></p>
<p>所以还要去生成一个token  还有前面的uuid 是通过在验证码的时候也有用到，所以需要将其作为一个属性，传递到子组件去</p>
<p>不是很懂怎样将组件的数据传递到请求的<br><img src="./images/1520387621288.jpg" alt="enter description here"></p>
<p>找到这个函数 将传入的payload 打印出来发现是参数 ，但是在哪调用了我就不是很清楚了<br>继续找<br>D:\luwei\project\wallpaper\wallpaper\src\routes\User\Login.js<br>在这个文件下 我找到了提交的参数 主要是通过submit的时候 调用上一层的函数 传递参数进去 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">handleSubmit = (err, values) =&gt; &#123;</span><br><span class="line">  console.log(&apos;handlesubmit&apos;, err, values);</span><br><span class="line">  const &#123; type &#125; = this.state;</span><br><span class="line">  if (!err) &#123;</span><br><span class="line">    this.props.dispatch(&#123;</span><br><span class="line">      type: &apos;login/login&apos;,</span><br><span class="line">      payload: &#123;</span><br><span class="line">        ...values,</span><br><span class="line">        type,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打印出来的value 就是：<br><code>{userName: &quot;1&quot;, password: &quot;1&quot;, captcha: &quot;1&quot;}</code><br>通过观察发现 其实这些参数都是组件内的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Tab key=&quot;account&quot; tab=&quot;账户密码登录&quot;&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            login.status === &apos;error&apos; &amp;&amp;</span><br><span class="line">            login.type === &apos;account&apos; &amp;&amp;</span><br><span class="line">            !login.submitting &amp;&amp;</span><br><span class="line">            this.renderMessage(&apos;账户或密码错误（admin/888888）&apos;)</span><br><span class="line">          &#125;</span><br><span class="line">          &lt;UserName name=&quot;userName&quot; placeholder=&quot;admin/user&quot; /&gt;</span><br><span class="line">          &lt;Password name=&quot;password&quot; placeholder=&quot;888888/123456&quot; /&gt;</span><br><span class="line">          &lt;Captcha name=&quot;captcha&quot; placeholder=&quot;11&quot; /&gt;</span><br><span class="line">        &lt;/Tab&gt;</span><br></pre></td></tr></table></figure>
<p>所以我需要传递什么值都可以在这里设置，观察最上面的图片，增加几个参数：<br>修改userName 为 account<br>增加uuid uuid的生成算法有讲究 所以之后需要找下资料<br>现在来看 uuid 的传递 就是在父组件 更新uuid 传递到子组件 </p>
<p>一开始我将 验证码图片的url写死了 就是只是在一开始进行初始化，将uuid 放到了state里面，然后就算在父组件的props的uuid属性改变了，子组件的state 并不会发生改变，所以可以通过将基本链接写在state里面，然后和父组件的props的uuid字符进行拼接，然后在父组件的属性更新 则url也更新。</p>
<p><img src="./images/1520391675442.jpg" alt="发送登录请求"><br>发送成功的登录请求 返回有数据 接下来就是要做处理了；<br><img src="./images/1520391868782.jpg" alt="成功回调"></p>
<p>接下来就是要对返回结果进行处理了  虽然不是很懂effect 这个机制的原理，但是可以直接在返回的response里面用 </p>
<p>意外发现：<br><img src="./images/1520392188889.jpg" alt="enter description here"></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@connect(<span class="function">(<span class="params">&#123; login, loading &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  login,</span><br><span class="line">  submitting: loading.effects[<span class="string">'login/login'</span>],</span><br><span class="line">&#125;))</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原来effects 是在这里进行loading的 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">login.status === &apos;error&apos; &amp;&amp;</span><br><span class="line">         login.type === &apos;account&apos; &amp;&amp;</span><br><span class="line">         !login.submitting &amp;&amp;</span><br></pre></td></tr></table></figure>
<p>这个传入的login的属性 请示并不太清楚从哪得到的 但是看到有type 这个属性 感觉好像是在submit的时候提交的 现在来看看response的处理 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">effects: &#123;</span><br><span class="line">    *login(&#123; payload &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">      // console.log(&apos;login&apos;, payload);</span><br><span class="line">      const response = yield call(fakeAccountLogin, payload);</span><br><span class="line">      console.log(&apos;login&apos;, response.state, JSON.stringify(response));</span><br><span class="line">      yield put(&#123;</span><br><span class="line">        type: &apos;changeLoginStatus&apos;,</span><br><span class="line">        payload: response,</span><br><span class="line">      &#125;);</span><br><span class="line">      console.log(&apos;login/login&apos;, response.state, JSON.stringify(response));</span><br><span class="line">      // Login successfully</span><br><span class="line">      if (response.status === &apos;ok&apos;) &#123;</span><br><span class="line">        reloadAuthorized();</span><br><span class="line">        yield put(routerRedux.push(&apos;/&apos;));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/登录接口与后端的交互/" data-id="cjemau3p1002gv0ugykxhc7vv" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx-工具/">nginx ,工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nginx 反向代理实现本地调试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/nginx 反向代理实现本地调试/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/nginx 反向代理实现本地调试/">nginx 反向代理实现本地调试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨天在做登陆接口的时候是用公司后台的登陆接口，在本地调试会出现跨域问题，我不太想通过jsonp解决这个问题，因为jsonp 用法相对来前端说比较麻烦，设置cors策略的话，因为我不能操作后台 这种方式也不太可行，</p>
<p>之前听朋友说到 设置反向代理可以解决这个问题，昨晚在研究nginx </p>
<ol>
<li>通过host 将本地改为域名 test.com </li>
<li>配置nginx 监听80端口</li>
<li>将含有api的url 转发到公司的主机</li>
<li>将没有api的链接转发到8000（这个是调试的端口）</li>
<li>本地调试的时候，将发送到服务器端的url改为发送到本地。</li>
</ol>
<p>host 增加一行解析（win文件地址：C:\Windows\System32\drivers\etc）：<br>    127.0.0.1       test.com</p>
<blockquote>
<p>注：这个文件要用替换的方式在能修改</p>
</blockquote>
<p><strong>注意：</strong><br>调试的时候域名要用好 不要用localhost  要用test.com(这个是host文件解析的本地域名)<br>还有就是 在npm start 的时候会自动打开localhost：8000这个端口，不能再这个页面调试 需要将域名改为test.com 并且不带端口 </p>
<p>nginx 配置如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#user  nobody;</span></span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#error_log  logs/error.log;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    <span class="keyword">include</span>       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">    <span class="comment">#                  '$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">    <span class="comment">#                  '"$http_user_agent" "$http_x_forwarded_for"';</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    keepalive_timeout  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#charset koi8-r;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#access_log  logs/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">        location ^~ /api/ &#123;</span><br><span class="line"></span><br><span class="line">             proxy_pass http:<span class="comment">//wallpaper-cms.t.talkmoney.cn/api/;</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">             proxy_pass http:<span class="comment">//127.0.0.1:8000/;</span></span><br><span class="line"></span><br><span class="line">             proxy_http_version <span class="number">1.1</span>;</span><br><span class="line">             proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">             proxy_set_header Connection <span class="string">"upgrade"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">        location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    root           html;</span></span><br><span class="line">        <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">        <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">        <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">        <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># deny access to .htaccess files, if Apache's document root</span></span><br><span class="line">        <span class="comment"># concurs with nginx's one</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">        <span class="comment">#    deny  all;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># another virtual host using mix of IP-, name-, and port-based configuration</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       8000;</span></span><br><span class="line">    <span class="comment">#    listen       somename:8080;</span></span><br><span class="line">    <span class="comment">#    server_name  somename  alias  another.alias;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTTPS server</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       443 ssl;</span></span><br><span class="line">    <span class="comment">#    server_name  localhost;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_certificate      cert.pem;</span></span><br><span class="line">    <span class="comment">#    ssl_certificate_key  cert.key;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_session_cache    shared:SSL:1m;</span></span><br><span class="line">    <span class="comment">#    ssl_session_timeout  5m;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span></span><br><span class="line">    <span class="comment">#    ssl_prefer_server_ciphers  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>=<a href="./attachments/nginx-1.12.2.zip">nginx</a></p>
<p>  跨域问题解决，现在来看 请求数据问题</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/nginx 反向代理实现本地调试/" data-id="cjemau3o4001av0ug7f2fumit" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx-工具/">nginx ,工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-flux应用实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/flux应用实践/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/flux应用实践/">flux应用实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.ruanyifeng.com/blog/2016/01/flux.html" target="_blank" rel="noopener">Flux 架构入门教程</a><br>可以安装一个demo 来直观的看效果 </p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/ruanyf/extremely-simple-flux-demo.git</span><br><span class="line">$ <span class="built_in">cd</span> extremely-simple-flux-demo &amp;&amp; npm install</span><br><span class="line">$ npm <span class="built_in">start</span></span><br></pre></td></tr></table></figure>
<p>然后，访问 <a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a> 。<br><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016011502.png" alt="enter description here"><br>你会看到一个按钮。这就是我们的Demo。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>前一篇有详细说明：</p>
<blockquote>
<ul>
<li>View： 视图层</li>
<li>Action（动作）：视图层发出的消息（比如mouseClick）</li>
<li>Dispatcher（派发器）：用来接收Actions、执行回调函数</li>
<li>Store（数据层）：用来存放应用的状态，一旦发生变动，就提醒Views要更新页面<br><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016011503.png" alt="enter description here"></li>
</ul>
</blockquote>
<p>flux 最大的特点是 数据的单向流动：<br>用户访问 View</p>
<blockquote>
<ol>
<li>View 发出用户的 Action</li>
<li>Dispatcher 收到 Action，要求 Store 进行相应的更新</li>
<li>Store 更新后，发出一个”change”事件</li>
<li>View 收到”change”事件后，更新页面</li>
</ol>
</blockquote>
<p>上面过程中，数据总是”单向流动”，任何相邻的部分都不会发生数据的”双向流动”。这保证了流程的清晰。</p>
<p>读到这里，你可能感到一头雾水，OK，这是正常的。接下来，我会详细讲解每一步。</p>
<h2 id="四、View（第一部分）"><a href="#四、View（第一部分）" class="headerlink" title="四、View（第一部分）"></a>四、View（第一部分）</h2><p>请打开 Demo 的首页index.jsx ，你会看到只加载了一个组件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// index.jsx</span><br><span class="line">var React = require(&apos;react&apos;);</span><br><span class="line">var ReactDOM = require(&apos;react-dom&apos;);</span><br><span class="line">var MyButtonController = require(&apos;./components/MyButtonController&apos;);</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;MyButtonController/&gt;,</span><br><span class="line">  document.querySelector(&apos;#example&apos;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>上面代码中，你可能注意到了，组件的名字不是 MyButton，而是 MyButtonController。这是为什么？</p>
<p>这里，我采用的是 React 的 controller view 模式。”controller view”组件只用来保存状态，然后将其转发给子组件。MyButtonController的源码很简单。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// components/MyButtonController.jsx</span><br><span class="line">var React = require(&apos;react&apos;);</span><br><span class="line">var ButtonActions = require(&apos;../actions/ButtonActions&apos;);</span><br><span class="line">var MyButton = require(&apos;./MyButton&apos;);</span><br><span class="line"></span><br><span class="line">var MyButtonController = React.createClass(&#123;</span><br><span class="line">  createNewItem: function (event) &#123;</span><br><span class="line">    ButtonActions.addNewItem(&apos;new item&apos;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  render: function() &#123;</span><br><span class="line">    return &lt;MyButton</span><br><span class="line">      onClick=&#123;this.createNewItem&#125;</span><br><span class="line">    /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = MyButtonController;</span><br></pre></td></tr></table></figure>
<p>上面代码中，MyButtonController将参数传给子组件MyButton。后者的源码甚至更简单。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// components/MyButton.jsx</span><br><span class="line">var React = require(&apos;react&apos;);</span><br><span class="line"></span><br><span class="line">var MyButton = function(props) &#123;</span><br><span class="line">  return &lt;div&gt;</span><br><span class="line">    &lt;button onClick=&#123;props.onClick&#125;&gt;New Item&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = MyButton;</span><br></pre></td></tr></table></figure>
<p>上面代码中，你可以看到MyButton是一个纯组件（即不含有任何状态），从而方便了测试和复用。这就是”controll view”模式的最大优点。</p>
<p>MyButton只有一个逻辑，就是一旦用户点击，就调用this.createNewItem 方法(从父组件传递下来的方法)，向Dispatcher发出一个Action。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// components/MyButtonController.jsx</span><br><span class="line"></span><br><span class="line">  // ...</span><br><span class="line">  createNewItem: function (event) &#123;</span><br><span class="line">    ButtonActions.addNewItem(&apos;new item&apos;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，调用createNewItem方法，会触发名为addNewItem的Action</p>
<h2 id="五、Action"><a href="#五、Action" class="headerlink" title="五、Action"></a>五、Action</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/flux应用实践/" data-id="cjemau3np000av0ug562oibbu" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-别再用勤奋掩饰你的懒惰" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/别再用勤奋掩饰你的懒惰/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/life/">生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/别再用勤奋掩饰你的懒惰/">别再用勤奋掩饰你的懒惰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>别再用勤奋掩饰你的懒惰<br>出品：<a href="https://mp.weixin.qq.com/s?__biz=MzIwODM3MzU1NA==&amp;mid=100003155&amp;idx=5&amp;sn=b8b40e0ed5e381e283b0a4370bf9190f&amp;chksm=17055f0e2072d6185353b90e8fdee9de1496f7cbf8e9f601f2d82616a09a1446e7bd58bb2384&amp;mpshare=1&amp;scene=1&amp;srcid=03078RlhOEVp5R4lsmnOfgh9#rd" target="_blank" rel="noopener">阿何</a><br>一</p>
<p>大概因为毕业的学校还不错，又干着实际上苦逼但外人看来高大上的创业，网络上和现实中经常有人向我取经。</p>
<p>小A是我的邻居，刚毕业两年，在一家互联网公司工作，最近有件事让他愤愤不平：公司有位和他同期入职的同事刚刚升职了，但在小A看来不管从哪方面看升职的都应该是他。</p>
<p>“我每天都是第一个到公司的，几乎都是最后一个离开的，而他每天都是掐着点来，掐着点离开。论勤奋程度，我甩他几条街。论个人能力，我也绝对不比他差。为什么老板就是看不到这一点，反而提拔他了呢？”</p>
<p>小A是个性格很不错的小伙子，能让他都感到如此气愤，显然在他心中觉得那位同事跟自己是有比较大差距的。</p>
<p>无独有偶，有个亲戚婶婶最近也特别烦恼。她家小孩眼看就要上高三，面临高考了。孩子学习特别刻苦，几乎每天都要学到十一二点钟，但成绩就是不上不下。甚至有些原来成绩不如他，也远不如他勤奋的同学都纷纷反超。</p>
<p>在我们的生活中有挺多这样的例子：明明付出了比别人更多的努力，但别人似乎就是看不到，甚至老天爷也没看到，没有给予相应的回报。</p>
<p>身边人的求助让我开始思考这个奇怪的现象，最后还真找到了原因。这里并不想探讨“勤奋”与“结果”之间的哲学关系，而是让我思考，到底怎样的“勤奋”才算是真正的勤奋。</p>
<p>二</p>
<p>我发现的情况是：大部分人的勤奋往往流于形式，并且容易自我陶醉于“我在进步”的假象当中，反而疏忽了去做那些真正有助于自我提升的事情。</p>
<p>说得更不好听一点，这些人其实是在用勤奋掩饰自己的懒惰。</p>
<p>你是个加班狗，每天7点半就到公司，吭哧吭哧干到下午6点下班。出去吃个盒饭，回到公司接着拼命到晚上十一点才回家。</p>
<p>这样很辛苦，但不叫勤奋。</p>
<p>你每天早起晨跑、读书、冥想。你每天都过得很充实，俯视周围芸芸众生，觉得唯有自己卓尔不群，优秀得耀眼。</p>
<p>你是个有追求的孩子，但这也不叫勤奋。</p>
<p>大部分人对勤奋的理解，都肤浅地停留在这种表面的仪式感上面，而忽视了勤奋的本质意义。更可怕的是一旦你习惯了这样的过程，便很容易从中得到满足，最后当发现自己没有得到应有的回报的时候开始怨天尤人，觉得天道不公。</p>
<p>什么是对勤奋肤浅的认识呢？</p>
<p>重复性的做一件事情，却缺乏思考。<br>长时间的做一件事情，却缺乏思考。</p>
<p>以上两种便是最为常见的勤奋误区，也是大部分勤奋却平庸者陷入发展困境的本质原因。</p>
<p>三</p>
<p>重复且长时间的做事情其实并不难，只要条件具备，大部分人都可以做到。难的其实是思考。</p>
<p>工作大概3年的时候，因为应酬工作太多，我体重剧增。大学毕业那会儿差不多是110多斤，可巅峰时期差不多到了150斤。</p>
<p>我决定减肥，采取的方式是每天早上7点钟起来去跑步。</p>
<p>自己意志力还算是不错的，启动减肥计划后的一个月，每天都准时去跑步，每次3到5公里，但减肥效果并不理想。客观地说，收效甚微。</p>
<p>去请教一位运动和减肥方面特别专业的朋友，他了解完我的具体状况后说，你这样跑步身体素质是会提升的，但减肥是没戏的，方法完全就错了。</p>
<p>后来他给了我一堆资料，硬着头皮全部看完，我这个门外汉才开始了解什么是无氧运动，什么是有氧运动。什么是正确的跑步方式，该给自己配置什么样的装备。我开始学会计算自己的摄入热量，知道大部分食物的卡路里。</p>
<p>后面的一个月状况完全不一样了，体重开始有规律的下降，而且跑起来更加轻松，完全不像原来感觉就像是在服苦役一样。</p>
<p>但在外人看来，这两段时期我的“勤奋”程度其实是差不多的，只不过结果是天壤之别。一般来说，后面好的结果会被解释为“这是坚持的力量”。</p>
<p>只有我自己明白，这是思考的力量。</p>
<p>有益的思考+坚持做事情，这才是完整意义上的勤奋。</p>
<p>勤奋不是为了努力，是为了偷懒！</p>
<p>怎样的偷懒？就是更快的把事情做完，做好，是让自己能做以前做不到的事情！</p>
<p>四</p>
<p>创业的第二年，我开掉了公司一位挺“努力”的员工。有些同事，甚至是我爱人都不是很理解。勤奋的员工不是所有老板都喜欢的吗，我为什么没有耐心再给他多些时间，而是采取如此决绝的手段？</p>
<p>原因很简单：这名员工已经中了很深的“勤奋病”，尽管和他有过多次沟通，但仍然没法改变，最后只好痛下杀手了。</p>
<p>他每天7点多一些就到公司了，大部分员工下午6点下班，但他每次都差不多8，9点才会离开。但问题是，他所在岗位的工作量根本没这么大，为什么需要这么多时间用在工作上呢？我便开始观察他。</p>
<p>首先我发现的一个状况是：因为每天起的太早（他家到公司差不多要1个小时的车程），所以上午的工作效率是极低的。差不多到10点钟开始，就会频频打呵欠，直到午休后才会有所改观。</p>
<p>所以大部分的工作，他其实都是在下午的时间完成的。如此仓促，完成的质量自然一般。有时候实在弄不完，还会弄到更晚，这也是为什么他必须比别人迟下班的其中一个原因。</p>
<p>有的时候按时完成了工作，下班后他留在办公室，其实也并没有拿这段时间来学习提升，或者总结工作。他干的最多的，还是提前去做明天的工作。有几次他下班后甚至开始打扫办公室，干阿姨做的事情。</p>
<p>很多次和他交流的时候，我都有意无意提醒他每天不用那么早来上班，同时每天能干好当天的活就可以了，与其加班去做更多的活，还不如多学点专业方面的知识，提高下自己的水平。</p>
<p>可惜的是提醒没啥效果，最后的结果是：他每天工作时间是最长的，但专业水准提升在同期员工中却是最慢的。后面加薪、职位提升如果不照顾他的话，肯定会心理失衡，影响公司整个氛围，没办法只好劝退。</p>
<p>这个员工最大的问题就是：沉迷于无效的勤奋，而忽略的勤奋的目的本身。</p>
<p>五</p>
<p>看完一本书很容易，看懂一本书很难。</p>
<p>看懂一本书，还能把书里的知识、方法应用到生活和工作中去，更难！</p>
<p>看书不是目的，学以致用，重点是后面的致用。</p>
<p>所以每天都看书，一个月看多少本书，其实都不是勤奋。</p>
<p>勤奋之前，要想清楚你的目的是什么。如果你的目的就是看书本身，当然也是没问题的。</p>
<p>但你就别抱怨别人看书比你少，掌握的知识却比你多。</p>
<p>问题在于：大多数人流于表面的勤奋，偏偏要求真正勤奋才能得到的东西。</p>
<p>坚持做事情很重要，但做事情的同时思考如何更快、更好地把事情做好更重要。</p>
<p>再次强调：勤奋的目的不是勤奋，是偷懒，是为了把原来需要1个小时才能做完的事情半个小时做完，是为了能做到以前做不到的事情。</p>
<p>而不是把最简单的“重复性”工作持续下去。</p>
<p>六</p>
<p>我跟小A说，如果你老板不是傻子，你那同事不是关系户，那么他这样做肯定有你不知道的原因。</p>
<p>根据对小A的了解，以及他对那同事的描述，其实我大体知道原因是什么。</p>
<p>就算小A是在我的企业工作，我的选择可能都会差不多：我会更乐意给小A这样的员工加薪，而让他同事那种类型的人做管理岗位。</p>
<p>小A的长处是善于钻研专业，研究细节。这样的人是专家型人才，可以很好地把本职工作做好。但他的弱势在于大局观和“方向感”较差，同时人际关系处理上属于一般。</p>
<p>他那位同事虽然看起来“没那么勤奋”，但对业务方向的发展却相当敏锐，同时也具有人际关系管理的潜质。</p>
<p>小A有努力，也有思考，只是他勤奋的方向不同，最终得到的东西也不同。不出意外的话，老板应该很快会给他涨薪。</p>
<p>而婶婶的小孩就属于典型的“懒惰式勤奋”，将勤奋肤浅的理解为“每晚学习到几点”，将刷题库作为唯一的学习手段，做错的题不思考，做对的题不总结，成绩无法提升也是自然而然的事情。</p>
<p>反思我们，有时候难道不是同样陶醉于这样的勤奋？</p>
<p>如果真的想要进步，请别再用勤奋掩饰自己的懒惰，真正开动起来吧！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/别再用勤奋掩饰你的懒惰/" data-id="cjemau3o4001kv0ugckiix974" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/人生/">人生</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-token认证机制" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/token认证机制/" class="article-date">
  <time datetime="2018-03-07T10:11:39.000Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/token认证机制/">2018-3-7 token认证机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch</a><br>fetch 的使用</p>
<p>登录成功后 返回的数据有token 所以在获取到token之后先存储在localStorage， 每次请求之前都先去查找localStorage这里面的token 然后加到请求头上面</p>
<p>具体实现方式 ：</p>
<ol>
<li>定义存储和获取的两个方法 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export function getToken() &#123;</span><br><span class="line">  return localStorage.getItem(&apos;token&apos;) || &apos;&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function setToken(token) &#123;</span><br><span class="line">  return localStorage.setItem(&apos;token&apos;, token);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>在login.js 里面 在获取到成功的token之后就放到ls里面</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reducers: &#123;</span><br><span class="line">  changeLoginStatus(state, &#123; payload &#125;) &#123;</span><br><span class="line">    setToken(payload.token);</span><br><span class="line">    return &#123;</span><br><span class="line">      ...state,</span><br><span class="line">      status: payload.status,</span><br><span class="line">      type: payload.type,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>成功设置好token<br>在请求的时候加上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (getToken()) &#123;</span><br><span class="line">      newOptions.headers = &#123;</span><br><span class="line">        &apos;Authorization&apos;:&apos;token &apos; + getToken(),</span><br><span class="line">        ...newOptions.headers,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/07/token认证机制/" data-id="cjemau3o4000yv0uglvauufpn" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ant-Design/">ant Design</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Effect 处理异步请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/06/Effect 处理异步请求/" class="article-date">
  <time datetime="2018-03-06T10:11:39.000Z" itemprop="datePublished">2018-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/Effect 处理异步请求/">Effect 处理异步请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在处理复杂的异步请求的时候，很容易让逻辑混乱，陷入嵌套陷阱，所以 Ant Design Pro 的底层基础框架 dva 使用 effect 的方式来管理<strong>同步化异步</strong>请求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">effects: &#123;</span><br><span class="line">  *fetch(&#123; payload &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">    yield put(&#123;</span><br><span class="line">      type: &apos;changeLoading&apos;,</span><br><span class="line">      payload: true,</span><br><span class="line">    &#125;);</span><br><span class="line">    // 异步请求 1</span><br><span class="line">    const response = yield call(queryFakeList, payload);</span><br><span class="line">    yield put(&#123;</span><br><span class="line">      type: &apos;save&apos;,</span><br><span class="line">      payload: response,</span><br><span class="line">    &#125;);</span><br><span class="line">    // 异步请求 2</span><br><span class="line">    const response2 = yield call(queryFakeList2, payload);</span><br><span class="line">    yield put(&#123;</span><br><span class="line">      type: &apos;save2&apos;,</span><br><span class="line">      payload: response2,</span><br><span class="line">    &#125;);</span><br><span class="line">    yield put(&#123;</span><br><span class="line">      type: &apos;changeLoading&apos;,</span><br><span class="line">      payload: false,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>通过 <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="noopener">generator</a> 和 <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Operators/yield" target="_blank" rel="noopener">yield</a> 使得异步调用的逻辑处理跟同步一样，更多可参看 dva async logic。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/06/Effect 处理异步请求/" data-id="cjemau3n60001v0ugcal4ecsb" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ant-Design/">ant Design</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-登录页面的构建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/06/登录页面的构建/" class="article-date">
  <time datetime="2018-03-06T10:11:39.000Z" itemprop="datePublished">2018-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/登录页面的构建/">登录页面的构建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>观察原有的登录界面，删除掉我不需要的元素。</p>
<p>发现在验证码的那个组件是不适用于我的，现在找出来，修改掉</p>
<p>通过获取验证码 这几个字 全局查找 找出 了组件所在位置<br><img src="./images/1520318270663.jpg" alt="验证码组件"></p>
<p>通过查找西湖区 找到登录页面的组件所在 修改删除 得到以下界面<br><img src="./images/1520319921946.jpg" alt="登录界面"></p>
<p>到此 已经将登录界面的界面做完，但是没有接上验证码和接口和登录接口</p>
<p><img src="./images/1520322456032.jpg" alt="验证码组件的使用demo"></p>
<p><img src="./images/1520324022861.jpg" alt="目标后台登录接麦你的验证码请求"><br>我看了下 目标管理界面的<strong>验证码请求</strong>，感觉和我自己构建的验证码请求不太一样，我是直接通过一条链接，然后就直接获取到图片 通过每次修改uuid 就获取到了不同的验证码图片 ，如下图：<br><img src="./images/1520324222753.jpg" alt="本机测试验证码图"></p>
<p>暂时先不深究这个问题 先留着<br>接下来查看<strong>登录事件</strong><br><img src="./images/1520325475859.jpg" alt="点击登录后发送的请求"><br> 根据api <strong>api/login/account</strong>找到函数调用接口<br> <img src="./images/1520325713899.jpg" alt="enter description here"><br> 再找在哪调用了这个接口 <strong>/api/login/account</strong><br> <img src="./images/1520325760451.jpg" alt="enter description here"><br>在找在哪调用了<strong>fakeAccountLogin</strong> 这个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">*login(&#123; payload &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">  const response = yield call(fakeAccountLogin, payload);</span><br><span class="line">  yield put(&#123;</span><br><span class="line">    type: &apos;changeLoginStatus&apos;,</span><br><span class="line">    payload: response,</span><br><span class="line">  &#125;);</span><br><span class="line">  // Login successfully</span><br><span class="line">  if (response.status === &apos;ok&apos;) &#123;</span><br><span class="line">    reloadAuthorized();</span><br><span class="line">    yield put(routerRedux.push(&apos;/&apos;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>对于=<a href="http://taobaofed.org/blog/2015/11/19/yield-and-delegating-yield/" target="_blank" rel="noopener">yield</a> 这个函数不理解 所以找了资料 </p>
<p>再看提交事件，打算通过提交事件去找到验证码组件</p>
<p>点击提交后发现，其实是有绑定事件的，并发送了post请求，如下图<br><img src="./images/%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E6%8F%90%E4%BA%A4%E6%97%B6%E9%97%B4.png" alt="enter description here" title="登录页面提交时间"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://nisonfuture.cn/2018/03/06/登录页面的构建/" data-id="cjemau3p3002jv0ug325g6ilg" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ant-Design/">ant Design</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; zurück</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/life/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/">编程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ant-Design/">ant Design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js工具/">js工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-工具/">nginx ,工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/人生/">人生</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ant-Design/" style="font-size: 20px;">ant Design</a> <a href="/tags/js工具/" style="font-size: 10px;">js工具</a> <a href="/tags/nginx-工具/" style="font-size: 13.33px;">nginx ,工具</a> <a href="/tags/react/" style="font-size: 16.67px;">react</a> <a href="/tags/人生/" style="font-size: 10px;">人生</a> <a href="/tags/工具/" style="font-size: 13.33px;">工具</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/10/ant Design 生命周期图/">ant Design 生命周期图</a>
          </li>
        
          <li>
            <a href="/2018/03/10/构建管理权限界面/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/03/09/列表组件和弹窗组件的交互/">列表组件和弹窗组件的交互</a>
          </li>
        
          <li>
            <a href="/2018/03/09/构建权限管理页面/">构建权限管理页面</a>
          </li>
        
          <li>
            <a href="/2018/03/09/封装查询组件/">封装查询组件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Pling Huang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>